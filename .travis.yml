language: python
sudo: required
cache:
  directories:
  - "$HOME/.cache/pip"
python:
- "2.7"
- '3.5'
- '3.6'
install:
- pip install -r requirements_dev.txt
- pip install -e .
- pip list
script:
- py.test --pep8 -m pep8
- travis_wait py.test tests --cov questionary -v
after_success:
- coveralls
jobs:
  include:
  - stage: deploy
    python: 3.6
    install: skip
    script: skip
    deploy:
      provider: pypi
      user: tmbo
      distributions: "sdist bdist_wheel"
      on:
        branch: master
        tags: true
      password:
        secure: ""
